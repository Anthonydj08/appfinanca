<ion-header>
  <ion-toolbar>
    <div *ngIf="!editingObjetivo">
      <ion-title>Editar objetivo</ion-title>
    </div>
    <div *ngIf="editingObjetivo">
      <ion-title>{{novoObjetivo.nome}}</ion-title>
    </div>
    <ion-buttons slot="start">
      <ion-button (click)="voltar()">
        <ion-back-button defaultHref="/tabs/objetivo"></ion-back-button>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content>
  <div *ngIf="!editingObjetivo">
    <ion-list insert>
      <ion-grid>
        <ion-row align-items-center>
          <ion-col size="1.25">
            <ion-icon size="large" name="create"></ion-icon>
          </ion-col>
          <ion-col size="8">
            <ion-input placeholder="Digite o nome do objetivo" type="text" [(ngModel)]="novoObjetivo.nome"></ion-input>
          </ion-col>
        </ion-row>

        <ion-row align-items-center>
          <ion-col size="1">
            <ion-icon size="large" name="pricetag"></ion-icon>
          </ion-col>
          <ion-col size="11">
            <ion-select [interfaceOptions]="customAlertCategoria" interface="alert" cancelText="Cancelar"
              [(ngModel)]="novoObjetivo.categoria" placeholder="Categoria">
              <ion-select-option value="Viagem">Viagem</ion-select-option>
              <ion-select-option value="Carro">Carro</ion-select-option>
              <ion-select-option value="Outros">Outros</ion-select-option>
            </ion-select>
          </ion-col>
        </ion-row>

        <ion-row align-items-center>
          <ion-col size="1.25">
            <ion-icon size="large" name="logo-usd"></ion-icon>
          </ion-col>
          <ion-col>
            <ion-input class="valor" placeholder="0,00" type="number" [(ngModel)]="novoObjetivo.valor">
            </ion-input>
          </ion-col>
        </ion-row>

        <ion-row align-items-center>
          <ion-col size="1">
            <ion-icon size="large" name="calendar"></ion-icon>
          </ion-col>
          <ion-col>
            <ion-datetime display-format="MMM/YYYY" [(ngModel)]="date"
              monthShortNames="Jan, Fev, Mar, Abr, Mai, Jun, Jul, Ago, Set, Out, Nov, Dez"></ion-datetime>
          </ion-col>
        </ion-row>
      </ion-grid>
    </ion-list>

    <ion-fab vertical="top" horizontal="end" slot="fixed">
      <ion-fab-button [disabled]="!novoObjetivo.valor || !novoObjetivo.nome || !novoObjetivo.categoria "
        class="submit-btn" (click)="salvar()" type="submit">
        <ion-icon name="checkmark"></ion-icon>
      </ion-fab-button>
    </ion-fab>
  </div>

  <div *ngIf="editingObjetivo">
    <ion-grid class="resumo">
      <ion-row align-items-center padding (click)="edit(objetivo)">
        <ion-col size="1.5" offset="0.5">
          <img class="icone" src="../../assets/icon/target.png">
        </ion-col>
        <ion-col size="4">
          <ion-label>Preciso</ion-label>
          <ion-row>
            <ion-label>{{novoObjetivo.valor | currency: 'R$'}}</ion-label>
          </ion-row>
        </ion-col>
        <ion-col size="1.5" offset="0.5">
          <img class="icone" src="../../assets/icon/pig.png">
        </ion-col>
        <ion-col size="4">
          <ion-label>Tenho</ion-label>
          <ion-row>
            <ion-label>{{total | currency: 'R$'}}</ion-label>
          </ion-row>
        </ion-col>
      </ion-row>
    </ion-grid>


    <ion-card class="transacao">
      <ion-card-header>
        <ion-card-title>Transações</ion-card-title>
      </ion-card-header>
      <ion-grid *ngFor="let transacao of transacoes">
        <ion-row align-items-center>
          <ion-col size="8.5">
            <ion-label>{{transacao.data | date: 'dd/MM/yyy'}}</ion-label>
          </ion-col>
          <ion-col size="3.5">
            <ion-label class="esquerda">{{transacao.valor | currency: "BRL"}}</ion-label>
          </ion-col>
        </ion-row>
      </ion-grid>
    </ion-card>

    <ion-card>
      <ion-card-header>
        <ion-card-title>Nova Transação</ion-card-title>
      </ion-card-header>
      <ion-row align-items-center>
        <ion-col size="1">
          <ion-icon size="large" name="logo-usd"></ion-icon>
        </ion-col>
        <ion-col size="9">
          <ion-input placeholder="Digite o valor" type="number" [(ngModel)]="novaTransacao.valor"></ion-input>
        </ion-col>
        <ion-col>
          <ion-icon (click)="inserirTransacao()" color="success" name="checkmark" size="large"></ion-icon>
        </ion-col>
      </ion-row>
    </ion-card>


    <ion-fab vertical="botton" horizontal="end" slot="fixed">
      <ion-fab-button class="submit-btn" (click)="editingObjetivo = false" type="submit">
        <ion-icon name="create"></ion-icon>
      </ion-fab-button>
    </ion-fab>
  </div>


</ion-content>